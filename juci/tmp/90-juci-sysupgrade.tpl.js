JUCI.template("widgets/upgrade.popup.html", "<div>\n<div class=\"modal-header\">\n<h3 class=\"modal-title\" translate>New software is available</h3>\n</div>\n<div class=\"modal-body\">\n<juci-config-lines>\n<juci-config-line title=\"{{'Pick image to upgrade'|translate}}\">\n<juci-select ng-model=\"data.selected\" ng-items=\"images\" ></juci-select>\n</juci-config-line>\n</juci-config-lines>\n</div>\n<div class=\"modal-footer\">\n<button class=\"btn btn-primary\" ng-click=\"ok()\">OK</button>\n<button class=\"btn btn-default\" ng-click=\"cancel()\">Cancel</button>\n</div>\n</div>\n");JUCI.template("pages/settings-upgrade-options.html", "<juci-layout-with-sidebar>\n<div ng-controller=\"SettingsUpgradeOptions\">\n<juci-config-section title=\"{{'Upgrade Options'|translate}}\"> \n<juci-config-info>{{ 'settings.upgrade.options.info' | translate }}</juci-config-info>\n<h2 translate>Online Upgrade</h2>\n<juci-config-lines>\n<juci-config-line title=\"{{'URL for file with latest image filename'|translate}}\">\n<input type=\"text\" class=\"form-control\" ng-model=\"system.upgrade.fw_check_url.value\" placeholder=\"{{'URL'|translate}}\"/>\n</juci-config-line>\n<juci-config-line title=\"{{'Upgrade URL base path'|translate}}\">\n<input type=\"text\" class=\"form-control\" ng-model=\"system.upgrade.fw_path_url.value\" placeholder=\"{{'HTTP Directory'|translate}}\"/>\n</juci-config-line>\n</juci-config-lines>\n</juci-config-section>\n<juci-config-section title=\"{{'USB Upgrade'|translate}}\">\n<juci-config-lines>\n<juci-config-line title=\"{{'Firmware image extension'|translate}}\">\n<juci-select ng-model=\"system.upgrade.fw_find_ext.value\" ng-items=\"allImageExtensions\"/>\n</juci-config-line>\n</juci-config-lines>\n</juci-config-section>\n</div>\n</juci-layout-with-sidebar>\n");JUCI.template("pages/settings-upgrade.html", "<juci-layout-with-sidebar>\n<div ng-controller=\"SettingsUpgradeCtrl\">\n<juci-config title=\"{{'Firmware Upgrade'|translate}}\"> \n<juci-config-info>{{ 'settings.upgrade.info' | translate }}</juci-config-info>\n<juci-config-lines>\n<juci-config-line title=\"{{'Current Firmware Version'|translate}}\">\n<strong>{{current_version}}</strong>\n</juci-config-line>\n</juci-config-lines>\n<juci-config-section title=\"{{'Online Upgrade'|translate}}\" ng-show=\"system.upgrade.fw_check_url.value\">\n<p>{{'settings.upgrade.online.info'|translate}}</p>\n<juci-config-lines>\n<juci-config-line title=\"{{onlineUpgrade}}\">\n<button ng-hide=\"onlineUpgradeAvailable\" class=\"btn btn-lg btn-default\" ng-click=\"onOnlineCheck()\">\n<i class=\"fa fa-spinner fa-spin\" ng-show=\"onlineCheckInProgress\"></i>{{'Check for Upgrade'|translate}}</button>\n<button ng-show=\"onlineUpgradeAvailable\" class=\"btn btn-lg btn-default\" ng-click=\"onUpgradeOnline()\">{{'Install Upgrade'|translate}}</button>\n</juci-config-line>\n</juci-config-lines>\n</juci-config-section>\n<juci-config-section title=\"{{'USB Firmware Upgrade'|translate}}\" ng-show=\"system.upgrade.fw_usb_path.value\">\n<p>{{'settings.upgrade.usb.info'|translate}}</p>\n<juci-config-lines>\n<juci-config-line title=\"{{usbUpgrade}}\" ng-show=\"usbUpgradeAvailable\">\n<button class=\"btn btn-lg btn-default\" ng-click=\"onUpgradeUSB()\">{{'Install Upgrade'|translate}}</button>\n</juci-config-line>\n<juci-config-line title=\"{{usbUpgrade}}\" ng-hide=\"usbUpgradeAvailable\">\n<button class=\"btn btn-lg btn-default\" ng-click=\"onCheckUSB()\"><i class=\"fa fa-spinner fa-spin\" ng-show=\"usbCheckInProgress\"></i>{{'Check for Upgrade'|translate}}</button>\n</juci-config-line>\n</juci-config-lines>\n</juci-config-section>\n<juci-config-section title=\"{{'Manual Firmware Upgrade'|translate}}\">\n<p>{{'settings.upgrade.manual.info'|translate}}</p>\n<juci-config-lines>\n<juci-config-line title=\"{{'Upload firmware image'|translate}}\" no-pull>\n<input style=\"width: 100%\" ng-show=\"state != 'UPLOADING'\" ng-disabled=\"uploading\" type=\"file\" \nclass=\"btn btn-default btn-file\"  name=\"filedata\" ng-model=\"uploadFile\" onchange=\"angular.element(this).scope().onSelectFile(event)\"/>\n<progressbar type=\"success\" ng-show=\"state == 'UPLOADING'\" value=\"uploadProgress\">{{uploadProgress}}% - ({{uploadSpeed}}Mbs)</progressbar>\n<button style=\"width: 100%\" ng-show=\"state == 'UPLOADING'\" ng-click=\"onCancelUpload()\" \nclass=\"btn btn-default\" translate>Cancel Upload</button>\n</juci-config-line>\n<juci-config-line title=\"{{'Start upgrade'|translate}}\" no-pull>\n<div ng-show=\"!imageExists && (state == 'VERIFIED' || state == 'INIT')\"><p translate>No image uploaded yet!</p></div>\n<p ng-show=\"state == 'UPLOADING'\" translate>Please wait.. <i class=\"fa fa-spinner fa-spin text-warning\"></i></p>\n<div ng-show=\"state == 'UPLOADED' || state == 'VERIFYING' || state == 'VERIFIED'\" class=\"pull-left\">\n<i ng-show=\"state == 'VERIFYING'\" class=\"fa fa-spinner fa-spin text-warning\" style=\"margin-right: 20px;\"></i>\n<i ng-show=\"state == 'VERIFIED' && imageValid\" class=\"fa fa-check text-success\" style=\"margin-right: 20px\"></i>\n</div>\n<div ng-show=\"imageExists && state == 'FAILED'\">\n<i class=\"pull-left fa fa-lg fa-times-circle text-danger\"></i>\n<p>{{imageError}}</p>\n<p translate>Please upload a new image of valid type!</p>\n</div>\n<div ng-show=\"state == 'VERIFIED'\">\n<p translate>Valid image found! Press 'Upgrade' to proceed!</p>\n<button ng-click=\"onStartUpgrade()\" \nclass=\"pull-right btn btn-success\">{{'Upgrade'|translate}}</button>\n<juci-select ng-model=\"data.keepSettings\" ng-items=\"keepSettingsList\"></juci-select>\n</div>\n<div ng-show=\"state == 'UPGRADING' || state == 'WRITING'\">\n<i class=\"pull-left fa fa-lg fa-spinner fa-spin text-warning\"></i>\n<p ng-show=\"state == 'UPGRADING'\" translate>Preparing upgrade...</p>\n<p ng-show=\"state == 'WRITING'\" translate><i class=\"fa fa-spin fa-spinner text-warning\"></i>\nWriting to flash.. please wait until device reboots and then reload this page!</p>\n</div>\n</juci-config-line>\n</juci-config-lines>\n</juci-config-section>\n</juci-config>\n<!-- commenting this for now. But if it is necessary to show these then add a config option for this page to show/hide them -->\n<!--<p class=\"alert alert-warning\" ng-hide=\"system.upgrade.fw_check_url.value\" translate>Online upgrade is disabled</p>\n<p class=\"alert alert-warning\" ng-hide=\"system.upgrade.fw_usb_path.value\" translate>USB upgrade is disabled</p>-->\n<modal title=\"Do you want to keep your configuration?\" ng-show=\"showConfirm\" on-accept=\"onConfirmKeep()\" on-dismiss=\"onConfirmWipe()\" accept-label=\"Yes\" dismiss-label=\"No\">\n<p translate>If you answer yes then your configuration will be saved before the upgrade and restored after the upgrade has completed. If you choose 'no' then all your current configuration will be reset to defaults.</p>\n</modal>\n<modal title=\"Firmware Upgrade\" ng-show=\"showUpgradeStatus\">\n<center>\n<p style=\"text-align: center;\" ng-show=\"!error\">{{message}}</p>\n<p class=\"alert alert-danger\" style=\"text-align: center;\" ng-show=\"error\">{{error}}</p>\n<br/><br/><i class=\"fa fa-spinner fa-spin fa-4x\" ng-show=\"(progress == 'progress' || progress == 'uploading') && !error\"></i>\n<button class=\"btn btn-default btn-lg\" ng-show=\"progress == 'completed' || error\" ng-click=\"onDismissModal()\" translate>Close</button>\n</center>\n</modal>\n</div>\n</juci-layout-with-sidebar>\n");